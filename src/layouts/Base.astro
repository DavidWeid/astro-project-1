---
import '@styles/base.css';
import '@fontsource/roboto/100.css';
import '@fontsource/roboto/300.css';
import '@fontsource/roboto/400.css';
import '@fontsource/roboto/500.css';
import '@fontsource/roboto/700.css';
import '@fontsource/roboto/900.css';
import '@fontsource-variable/roboto-mono';
import generalOGImage from '@images/og/og-davids-place.png';
import { ViewTransitions } from 'astro:transitions';
import MainNav from '@components/MainNav.astro';
import MainFooter from '@components/MainFooter.astro';

interface Props {
  title: string;
  indexForSearch?: boolean;
  includeSearchComponent?: boolean;
}

interface generalOGImage {
  src: string;
  width: number;
  height: number;
}

const baseURL = import.meta.env.BASE_URL;
const pathname: string = `${baseURL}${new URL(Astro.request.url).pathname}`;
const urlString: string = new URL(Astro.request.url).href;
const { title, indexForSearch = true, includeSearchComponent } = Astro.props;
const metaTitle: string = title ? `${title} | David's Place` : "David's Place";
const metaDescription: string =
  "David's Place includes projects, blogs, and ideas related to web development and other interests held by David Weid II.";

const mainElementAttributes = {};
indexForSearch === false
  ? null
  : ((mainElementAttributes as { 'data-pagefind-body': boolean })[
      'data-pagefind-body'
    ] = true);
---

<!doctype html>
<html lang='en' class='dark' data-pagefind-meta={`url[${pathname}]`}>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width' />
    <meta name='generator' content={Astro.generator} />
    <link rel='canonical' href={urlString} />
    <link rel='sitemap' href={`${baseURL}sitemap-index.xml`} />

    <link rel='icon' type='image/ico' href=`${baseURL}favicon.ico` />
    <link
      rel='apple-touch-icon'
      sizes='180x180'
      href={`${baseURL}apple-touch-icon.png?v=1`}
    />
    <link
      rel='icon'
      type='image/png'
      sizes='32x32'
      href={`${baseURL}favicon-32x32.png?v=1`}
    />
    <link
      rel='icon'
      type='image/png'
      sizes='16x16'
      href={`${baseURL}favicon-16x16.png?v=1`}
    />
    <link rel='manifest' href={`${baseURL}site.webmanifest?v=1`} />
    <link
      rel='mask-icon'
      href={`${baseURL}safari-pinned-tab.svg?v=1`}
      color='#3844C6'
    />
    <link rel='shortcut icon' href={`${baseURL}favicon.ico?v=1`} />
    <meta name='apple-mobile-web-app-title' content="David's Place" />
    <meta name='application-name' content="David's Place" />
    <meta name='msapplication-TileColor' content='#603cba' />
    <meta name='theme-color' content='#3844C6' />

    <title>{metaTitle}</title>
    <meta name='description' content={metaDescription} />
    <meta property='og:locale' content='en_US' />
    <meta property='og:title' content={metaTitle} />
    <meta property='og:description' content={metaDescription} />
    <meta property='og:url' content={urlString} />
    <meta
      property='og:site_name'
      content="Portfolio Project Focused on Web Development | David's Place"
    />
    <meta property='og:type' content='website' />
    <meta property='og:image' content={generalOGImage.src} />
    <meta property='og:image:width' content={`${generalOGImage.width}`} />
    <meta property='og:image:height' content={`${generalOGImage.height}`} />
    <meta
      property='og:image:alt'
      content="Social Media Open Graph Illustration for David's Place"
    />
    <meta property='og:image:type' content='image/png' />
    <meta name='twitter:card' content='summary_large_image' />
    <meta name='twitter:title' content={metaTitle} />
    <meta name='twitter:description' content={metaDescription} />
    <meta name='twitter:image' content={generalOGImage.src} />

    {
      includeSearchComponent && (
        <>
          <link href={`${baseURL}pagefind/pagefind-ui.css`} rel='stylesheet' />
          <script is:inline src={`${baseURL}pagefind/pagefind-ui.js`} />
        </>
      )
    }

    <ViewTransitions />
  </head>
  <body>
    <MainNav />
    <main {...mainElementAttributes}>
      <slot />
    </main>
    <MainFooter />
  </body>
</html>
